/*	сохраняем данный файл в кодировке UTF-8		*/

	author: Golinskiy Konstantin	e-mail: golinskiy.konstantin@gmail.com
	
/*
	Potentiometer values for 10 kΩ, 50 kΩ and 100 kΩ
	
	последние три цифры означают его сопротивление ( всего три вида ):
	
	MCP41010 - 10 kOm	
	MCP41050 - 50 kOm
	MCP41100 - 100 kOm
	
	Сопротивление щётки (ползунка) — 52 Ом
	Напряжение питания от 2.7 В до 5.5 В
	Количество положений щётки — 256
	Температурный диапазон -40…+85 °C

*/
		
	// в CubeMX включаем SPI в режиме только передача ( и включаем пин CS если нужен )
	// в файле #include "MCP41xxx.h" указываем наши настройки
	
		//========  SETUP  ===========================================================
			
			// указываем порт SPI для HAL -------------------
			
			#define 	MCP41XXX_SPI_HAL 		hspi1
			
			//-----------------------------------------------
				
			// ВНИМАНИЕ!!! обязательно дергать CS ( если просто притянуть к земле то потенциометр не работает )
			
			#define CS_PORT
			
			//----------------------------------------------------------------------------------------
			
			#ifdef CS_PORT
				#if defined (CS_GPIO_Port)
				#else
					#define CS_GPIO_Port    GPIOA
					#define CS_Pin			GPIO_PIN_14
				#endif
			#endif
			
			//----------------------------------------------------------------------------------------
			
		//===========================================================================
	
	
	
	
	#include "MCP41xxx.h"
	
	.........
	.........

main()=============================================================================================================================

	.........
	.........
	.........
	
	//================================================================


		for( int16_t i = 0; i < 256; i++ ){
			
			// отправка данных в потенциометр 
			// ( от 0 до 255 -> движение происходит от PB0 до PA0 )
			// указываем номер потонциометра ( первый, второй или оба сразу  )
			// POTENTIOMETER_ONE, POTENTIOMETER_TWO, POTENTIOMETER_BOTH
			// (микросхемы бывают с одним потенциометром и двумя)
			MCP41xxx_sendValue( POTENTIOMETER_ONE, i );
			HAL_Delay(100);
		}
		
		// выключаем указаный потенциометр (потребление <1 мкА в статическом режиме)
		MCP41xxx_potentiometerOff( POTENTIOMETER_ONE );

	//=================================================================



while(1)===========================================================================================================================

	.........
	.........
	.........
	.........

=== end while(1) ==================================================================================================================
=== end main() ====================================================================================================================
